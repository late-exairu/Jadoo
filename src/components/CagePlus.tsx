import { useState, useEffect } from "react";

export default function CagePlus({ className }: { className?: string }) {
  // animate paths with staggered delay
  const paths = [
    "M6 6C6 6 6 6 6 6H1C1 6 1 6 1 6V8C1 8 1 8 1 8H6C6 8 6 8 6 8V13C6 13 6 13 6 13H8C8 13 8 13 8 13V8C8 8 8 8 8 8H13C13 8 13 8 13 8V6C13 6 13 6 13 6H8C8 6 8 6 8 6V1C8 1 8 1 8 1H6C6 1 6 1 6 1Z",
    //"M6 114C6 114 6 114 6 114H1C1 114 1 114 1 114V116C1 116 1 116 1 116H6C6 116 6 116 6 116V121C6 121 6 121 6 121H8C8 121 8 121 8 121V116C8 116 8 116 8 116H13C13 116 13 116 13 116V114C13 114 13 114 13 114H8C8 114 8 114 8 114V109C8 109 8 109 8 109H6C6 109 6 109 6 109Z",
    "M6 78C6 78 6 78 6 78H1C1 78 1 78 1 78V80C1 80 1 80 1 80H6C6 80 6 80 6 80V85C6 85 6 85 6 85H8C8 85 8 85 8 85V80C8 80 8 80 8 80H13C13 80 13 80 13 80V78C13 78 13 78 13 78H8C8 78 8 78 8 78V73C8 73 8 73 8 73H6C6 73 6 73 6 73Z",
    "M150 114C150 114 150 114 150 114H145C145 114 145 114 145 114V116C145 116 145 116 145 116H150C150 116 150 116 150 116V121C150 121 150 121 150 121H152C152 121 152 121 152 121V116C152 116 152 116 152 116H157C157 116 157 116 157 116V114C157 114 157 114 157 114H152C152 114 152 114 152 114V109C152 109 152 109 152 109H150C150 109 150 109 150 109Z",
    "M6 42C6 42 6 42 6 42H1C1 42 1 42 1 42V44C1 44 1 44 1 44H6C6 44 6 44 6 44V49C6 49 6 49 6 49H8C8 49 8 49 8 49V44C8 44 8 44 8 44H13C13 44 13 44 13 44V42C13 42 13 42 13 42H8C8 42 8 42 8 42V37C8 37 8 37 8 37H6C6 37 6 37 6 37Z",
    "M114 114C114 114 114 114 114 114H109C109 114 109 114 109 114V116C109 116 109 116 109 116H114C114 116 114 116 114 116V121C114 121 114 121 114 121H116C116 121 116 121 116 121V116C116 116 116 116 116 116H121C121 116 121 116 121 116V114C121 114 121 114 121 114H116C116 114 116 114 116 114V109C116 109 116 109 116 109H114C114 109 114 109 114 109Z",
    "M150 78C150 78 150 78 150 78H145C145 78 145 78 145 78V80C145 80 145 80 145 80H150C150 80 150 80 150 80V85C150 85 150 85 150 85H152C152 85 152 85 152 85V80C152 80 152 80 152 80H157C157 80 157 80 157 80V78C157 78 157 78 157 78H152C152 78 152 78 152 78V73C152 73 152 73 152 73H150C150 73 150 73 150 73Z",
    //"M6 150C6 150 6 150 6 150H1C1 150 1 150 1 150V152C1 152 1 152 1 152H6C6 152 6 152 6 152V157C6 157 6 157 6 157H8C8 157 8 157 8 157V152C8 152 8 152 8 152H13C13 152 13 152 13 152V150C13 150 13 150 13 150H8C8 150 8 150 8 150V145C8 145 8 145 8 145H6C6 145 6 145 6 145Z",
    "M78 114C78 114 78 114 78 114H73C73 114 73 114 73 114V116C73 116 73 116 73 116H78C78 116 78 116 78 116V121C78 121 78 121 78 121H80C80 121 80 121 80 121V116C80 116 80 116 80 116H85C85 116 85 116 85 116V114C85 114 85 114 85 114H80C80 114 80 114 80 114V109C80 109 80 109 80 109H78C78 109 78 109 78 109Z",
    "M150 150C150 150 150 150 150 150H145C145 150 145 150 145 150V152C145 152 145 152 145 152H150C150 152 150 152 150 152V157C150 157 150 157 150 157H152C152 157 152 157 152 157V152C152 152 152 152 152 152H157C157 152 157 152 157 152V150C157 150 157 150 157 150H152C152 150 152 150 152 150V145C152 145 152 145 152 145H150C150 145 150 145 150 145Z",
    "M150 6C150 6 150 6 150 6H145C145 6 145 6 145 6V8C145 8 145 8 145 8H150C150 8 150 8 150 8V13C150 13 150 13 150 13H152C152 13 152 13 152 13V8C152 8 152 8 152 8H157C157 8 157 8 157 8V6C157 6 157 6 157 6H152C152 6 152 6 152 6V1C152 1 152 1 152 1H150C150 1 150 1 150 1Z",
    "M114 150C114 150 114 150 114 150H109C109 150 109 150 109 150V152C109 152 109 152 109 152H114C114 152 114 152 114 152V157C114 157 114 157 114 157H116C116 157 116 157 116 157V152C116 152 116 152 116 152H121C121 152 121 152 121 152V150C121 150 121 150 121 150H116C116 150 116 150 116 150V145C116 145 116 145 116 145H114C114 145 114 145 114 145Z",
    "M42 114C42 114 42 114 42 114H37C37 114 37 114 37 114V116C37 116 37 116 37 116H42C42 116 42 116 42 116V121C42 121 42 121 42 121H44C44 121 44 121 44 121V116C44 116 44 116 44 116H49C49 116 49 116 49 116V114C49 114 49 114 49 114H44C44 114 44 114 44 114V109C44 109 44 109 44 109H42C42 109 42 109 42 109Z",
    "M78 150C78 150 78 150 78 150H73C73 150 73 150 73 150V152C73 152 73 152 73 152H78C78 152 78 152 78 152V157C78 157 78 157 78 157H80C80 157 80 157 80 157V152C80 152 80 152 80 152H85C85 152 85 152 85 152V150C85 150 85 150 85 150H80C80 150 80 150 80 150V145C80 145 80 145 80 145H78C78 145 78 145 78 145Z",
    "M114 78C114 78 114 78 114 78H109C109 78 109 78 109 78V80C109 80 109 80 109 80H114C114 80 114 80 114 80V85C114 85 114 85 114 85H116C116 85 116 85 116 85V80C116 80 116 80 116 80H121C121 80 121 80 121 80V78C121 78 121 78 121 78H116C116 78 116 78 116 78V73C116 73 116 73 116 73H114C114 73 114 73 114 73Z",
    //"M42 150C42 150 42 150 42 150H37C37 150 37 150 37 150V152C37 152 37 152 37 152H42C42 152 42 152 42 152V157C42 157 42 157 42 157H44C44 157 44 157 44 157V152C44 152 44 152 44 152H49C49 152 49 152 49 152V150C49 150 49 150 49 150H44C44 150 44 150 44 150V145C44 145 44 145 44 145H42C42 145 42 145 42 145Z",
    "M150 42C150 42 150 42 150 42H145C145 42 145 42 145 42V44C145 44 145 44 145 44H150C150 44 150 44 150 44V49C150 49 150 49 150 49H152C152 49 152 49 152 49V44C152 44 152 44 152 44H157C157 44 157 44 157 44V42C157 42 157 42 157 42H152C152 42 152 42 152 42V37C152 37 152 37 152 37H150C150 37 150 37 150 37Z",
    "M78 78C78 78 78 78 78 78H73C73 78 73 78 73 78V80C73 80 73 80 73 80H78C78 80 78 80 78 80V85C78 85 78 85 78 85H80C80 85 80 85 80 85V80C80 80 80 80 80 80H85C85 80 85 80 85 80V78C85 78 85 78 85 78H80C80 78 80 78 80 78V73C80 73 80 73 80 73H78C78 73 78 73 78 73Z",
    "M114 6C114 6 114 6 114 6H109C109 6 109 6 109 6V8C109 8 109 8 109 8H114C114 8 114 8 114 8V13C114 13 114 13 114 13H116C116 13 116 13 116 13V8C116 8 116 8 116 8H121C121 8 121 8 121 8V6C121 6 121 6 121 6H116C116 6 116 6 116 6V1C116 1 116 1 116 1H114C114 1 114 1 114 1Z",
    "M42 78C42 78 42 78 42 78H37C37 78 37 78 37 78V80C37 80 37 80 37 80H42C42 80 42 80 42 80V85C42 85 42 85 42 85H44C44 85 44 85 44 85V80C44 80 44 80 44 80H49C49 80 49 80 49 80V78C49 78 49 78 49 78H44C44 78 44 78 44 78V73C44 73 44 73 44 73H42C42 73 42 73 42 73Z",
    "M114 42C114 42 114 42 114 42H109C109 42 109 42 109 42V44C109 44 109 44 109 44H114C114 44 114 44 114 44V49C114 49 114 49 114 49H116C116 49 116 49 116 49V44C116 44 116 44 116 44H121C121 44 121 44 121 44V42C121 42 121 42 121 42H116C116 42 116 42 116 42V37C116 37 116 37 116 37H114C114 37 114 37 114 37Z",
    "M78 6C78 6 78 6 78 6H73C73 6 73 6 73 6V8C73 8 73 8 73 8H78C78 8 78 8 78 8V13C78 13 78 13 78 13H80C80 13 80 13 80 13V8C80 8 80 8 80 8H85C85 8 85 8 85 8V6C85 6 85 6 85 6H80C80 6 80 6 80 6V1C80 1 80 1 80 1H78C78 1 78 1 78 1Z",
    "M78 42C78 42 78 42 78 42H73C73 42 73 42 73 42V44C73 44 73 44 73 44H78C78 44 78 44 78 44V49C78 49 78 49 78 49H80C80 49 80 49 80 49V44C80 44 80 44 80 44H85C85 44 85 44 85 44V42C85 42 85 42 85 42H80C80 42 80 42 80 42V37C80 37 80 37 80 37H78C78 37 78 37 78 37Z",
    "M42 6C42 6 42 6 42 6H37C37 6 37 6 37 6V8C37 8 37 8 37 8H42C42 8 42 8 42 8V13C42 13 42 13 42 13H44C44 13 44 13 44 13V8C44 8 44 8 44 8H49C49 8 49 8 49 8V6C49 6 49 6 49 6H44C44 6 44 6 44 6V1C44 1 44 1 44 1H42C42 1 42 1 42 1Z",
    "M42 42C42 42 42 42 42 42H37C37 42 37 42 37 42V44C37 44 37 44 37 44H42C42 44 42 44 42 44V49C42 49 42 49 42 49H44C44 49 44 49 44 49V44C44 44 44 44 44 44H49C49 44 49 44 49 44V42C49 42 49 42 49 42H44C44 42 44 42 44 42V37C44 37 44 37 44 37H42C42 37 42 37 42 37Z",
  ];

  const [activePathIndex, setActivePathIndex] = useState<number | null>(null);
  const [activeColor, setActiveColor] = useState<"#FF7159" | "#6246E5">(
    "#FF7159"
  );

  useEffect(() => {
    const intervalId = setInterval(() => {
      // Select random path
      const randomIndex = Math.floor(Math.random() * paths.length);
      // Select random color
      const randomColor = Math.random() < 0.5 ? "#FF7159" : "#6246E5";

      setActivePathIndex(randomIndex);
      setActiveColor(randomColor);

      // Reset color after 1 second
      const resetTimeout = setTimeout(() => {
        setActivePathIndex(null);
      }, 500);

      return () => clearTimeout(resetTimeout);
    }, 900);

    return () => clearInterval(intervalId);
  }, [paths.length]);

  return (
    <svg
      className={className}
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 158 158"
    >
      {paths.map((pathData, index) => (
        <path
          key={index}
          fill={activePathIndex === index ? activeColor : "#e5e5e5"}
          stroke="none"
          d={pathData}
          style={{ transition: "fill 0.2s ease-in-out" }}
        />
      ))}
    </svg>
  );
}
